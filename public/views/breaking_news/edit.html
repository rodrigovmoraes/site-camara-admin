<div ui-view class="fade-in-up">
   <!-- BEGIN EDIT BREAKING NEWS -->
   <div class="portlet box green portlet-in-modal">
      <div class="portlet-title">
          <div class="caption">
             <i class="fa fa-plus"></i>Editar Destaque Rotativo #{{$editBreakingNewsItemCtrl.order}}
          </div>
      </div>
      <div class="portlet-body form">
          <div class="alert alert-danger alert-no-margin" role="alert" ng-if="$editBreakingNewsItemCtrl.errorMessage">
             {{ $editBreakingNewsItemCtrl.errorMessage }}
          </div>
          <!-- BEGIN FORM-->
          <form action="#" name="$editBreakingNewsItemCtrl.editBreakingNewsItemForm" class="form-horizontal form-bordered ng-pristine ng-valid" novalidate="">

              <div class="form-group">
               <label class="control-label col-md-3">Título cabeçalho</label>
               <div class="col-md-9">
                    <input type="text" class="form-control" name="headline" required="true" maxlength="150" ng-model="$editBreakingNewsItemCtrl.headline">
                    <div class="alert alert-danger" role="alert" ng-if="$editBreakingNewsItemCtrl.editBreakingNewsItemForm.headline.$error.required && ($editBreakingNewsItemCtrl.editBreakingNewsItemForm.headline.$touched || $editBreakingNewsItemCtrl.editBreakingNewsItemForm.$submitted)">
                        O título de cabeçalho do destaque não pode ser vazio.
                    </div>
                    <span class="help-block">
                       O título de cabeçalho é um texto que
                       será apresentado em uma faixa superior no item de
                       destaque rotativo na página principal
                       do Portal da Câmara. É sugerido que seja utilizado
                       um título que represente o tipo de destaque que está
                       sendo cadastrado, algo como "Sessão Ordinária",
                       "Sessão Solene", "Exposição de Fotos", "TV ao Vivo",
                       "Ações do Legislativo", etc.
                    </span>
               </div>
              </div>

              <div class="form-group">
               <label class="control-label col-md-3">Ícone de cabeçalho</label>
               <div class="col-md-9">
                    <ui-select name="headlineIcon" required="true" ng-model="$editBreakingNewsItemCtrl.selectedHeadlineIcon" theme="bootstrap">
                        <ui-select-match placeholder="Escolha o ícone desejado...">
                           <span ng-class="$select.selected" style="font-size: 125%">&nbsp;&nbsp;{{ $select.selected }}</span></ui-select-match>
                        <ui-select-choices repeat="icon in $editBreakingNewsItemCtrl.headlineIcons | filter: $select.search">
                          <div>
                             <span ng-class="icon" style="font-size: 125%" ng-bind-html="'&nbsp;&nbsp;' + (icon | highlight: $select.search)"></span>
                          </div>
                        </ui-select-choices>
                    </ui-select>
                    <div class="alert alert-danger" role="alert" ng-if="$editBreakingNewsItemCtrl.editBreakingNewsItemForm.headlineIcon.$error.required && ($editBreakingNewsItemCtrl.editBreakingNewsItemForm.headlineIcon.$touched || $editBreakingNewsItemCtrl.editBreakingNewsItemForm.$submitted)">
                        Selecione um ícone para o título de cabeçalho.
                    </div>
                    <span class="help-block">
                       Selecione um ícone que melhor represente
                       o tipo de destaque que está sendo cadastrado.
                       O ícone será apresentado ao lado do título de cabeçalho.
                    </span>
               </div>
              </div>

              <div class="form-group">
                <label class="control-label col-md-3">Título</label>
                <div class="col-md-9">
                    <input type="text" class="form-control" name="title" required="true" maxlength="150" ng-model="$editBreakingNewsItemCtrl.title">
                    <div class="alert alert-danger" role="alert" ng-if="$editBreakingNewsItemCtrl.editBreakingNewsItemForm.title.$error.required && ($editBreakingNewsItemCtrl.editBreakingNewsItemForm.title.$touched || $editBreakingNewsItemCtrl.editBreakingNewsItemForm.$submitted)">
                        O título do destaque não pode ser vazio.
                    </div>
                    <span class="help-block">Digite o título do destaque.</span>
                </div>
              </div>

              <div class="form-body">
                <div class="form-group">
                  <label class="control-label col-md-3">Data</label>
                  <div class="col-md-9">
                     <input type="date" id="date" name="date" ng-model="$editBreakingNewsItemCtrl.date" ng-disabled="$editBreakingNewsItemCtrl.dateDisabled" placeholder="yyyy-MM-dd" ui-validate='{ validDate : $editBreakingNewsItemCtrl.dateValidator }'/>
                     <div class="form-check">
                        <label class="form-check-label">
                         <input class="form-check-input" type="checkbox" ng-model="$editBreakingNewsItemCtrl.dateDisabled" ng-change="$editBreakingNewsItemCtrl.dateDisabledChanged()">&nbsp;Não exibir data
                        </label>
                     </div>
                     <div class="alert alert-danger" role="alert" ng-if="$editBreakingNewsItemCtrl.editBreakingNewsItemForm.date.$error.date && ($editBreakingNewsItemCtrl.editBreakingNewsItemForm.date.$touched || $editBreakingNewsItemCtrl.editBreakingNewsItemForm.$submitted)">
                        Data inválida.
                     </div>
                     <div class="alert alert-danger" role="alert" ng-if="$editBreakingNewsItemCtrl.editBreakingNewsItemForm.date.$error.validDate && ($editBreakingNewsItemCtrl.editBreakingNewsItemForm.date.$touched || $editBreakingNewsItemCtrl.editBreakingNewsItemForm.$submitted)">
                        Digite uma data.
                     </div>
                     <span class="help-block">
                        Digite uma data que represente este destaque e que irá aparecer no rodapé
                        do item de destaque rotativo.
                     </span>
                  </div>
                </div>
              </div>

              <div class="form-body">
                   <div class="form-group">
                      <label class="control-label col-md-3">Imagem</label>
                      <div class="col-md-9">
                         <div class="alert alert-danger alert-no-margin" role="alert" style="margin-bottom: 10px" ng-if="$editBreakingNewsItemCtrl.uploadBreakingNewsItemImageErrorMessage">
                            {{ $editBreakingNewsItemCtrl.uploadBreakingNewsItemImageErrorMessage }}
                         </div>
                         <table class="table" ng-if="$editBreakingNewsItemCtrl.uploader.queue.length > 0">
                              <thead>
                                  <tr>
                                      <th width="50%">Nome</th>
                                      <th ng-show="$editBreakingNewsItemCtrl.uploader.isHTML5">Tamanho</th>
                                      <th>Estado</th>
                                      <th>Ações</th>
                                  </tr>
                              </thead>
                              <tbody>
                                  <tr ng-repeat="item in $editBreakingNewsItemCtrl.uploader.queue">
                                      <td>
                                          <strong>{{ item.file.name }}</strong>
                                      </td>
                                      <td ng-show="$editBreakingNewsItemCtrl.uploader.isHTML5" nowrap>{{ item.file.size / 1024 /1024 | number: 2 }} MB</td>
                                      <td class="text-center">
                                          <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span>
                                          <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span>
                                          <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
                                      </td>
                                      <td nowrap>
                                          <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">
                                              <span class="glyphicon glyphicon-ban-circle"></span> Cancelar envio
                                          </button>
                                          <button type="button" class="btn btn-danger btn-xs" ng-click="$editBreakingNewsItemCtrl.removeFileItem(item)">
                                              <span class="glyphicon glyphicon-trash"></span> Remover
                                          </button>
                                      </td>
                                  </tr>
                              </tbody>
                          </table>

                          <div>
                              <span class="help-block" style="margin-bottom: 10px">Selecione uma imagem por meio do botão abaixo.</span>
                              <div ng-if="$editBreakingNewsItemCtrl.uploader.queue.length > 0">
                                  Progresso do envio:
                                  <div class="progress" style="">
                                      <div class="progress-bar" role="progressbar" ng-style="{ 'width': $editBreakingNewsItemCtrl.uploader.progress + '%' }"></div>
                                  </div>
                              </div>
                              <!-- Example: nv-file-select="" uploader="{Object}" options="{Object}" filters="{String}" -->
                              <input type="file" name="breakingNewsItemImageFile" nv-file-select="" uploader="$editBreakingNewsItemCtrl.uploader"/><br/>
                              <div class="alert alert-danger" role="alert" ng-if="!$editBreakingNewsItemCtrl.breakingNewsItemImageFilename && $editBreakingNewsItemCtrl.editBreakingNewsItemForm.$submitted">
                                 Selecione uma imagem.
                              </div>
                              <strong>
                                 A imagem será redimensionada para uma largura de {{ $editBreakingNewsItemCtrl.breakingNewsItemImageWidth }} pixels
                                 e uma altura de {{ $editBreakingNewsItemCtrl.breakingNewsItemImageHeight }} pixels.
                                 Se a imagem não obedecer a proporção de {{ $editBreakingNewsItemCtrl.breakingNewsItemImageWidthRatio }} x {{ $editBreakingNewsItemCtrl.breakingNewsItemImageHeightRatio }} (largura x altura) ela poderá ficar distorcida.
                              </strong>
                          </div>
                      </div>
                   </div>

                   <div class="form-group" ng-repeat="item in $editBreakingNewsItemCtrl.uploader.queue">
                      <label class="control-label col-md-3">&nbsp;</label>
                      <div class="col-md-9">
                        <!-- Image preview -->
                        <div class="canvas-row-thumb" ng-show="$editBreakingNewsItemCtrl.uploader.isHTML5" ng-thumb="{ file: item._file, height: $editBreakingNewsItemCtrl.breakingNewsItemImageHeight, width: $editBreakingNewsItemCtrl.breakingNewsItemImageWidth }" ng-style="{ width : $editBreakingNewsItemCtrl.breakingNewsItemImageWidth, heigth: $editBreakingNewsItemCtrl.breakingNewsItemImageHeight }"></div>
                      </div>
                   </div>
                   <div class="form-group" ng-if="(!$editBreakingNewsItemCtrl.uploader.queue || $editBreakingNewsItemCtrl.uploader.queue.length === 0) && $editBreakingNewsItemCtrl.breakingNewsItemImageURL">
                      <label class="control-label col-md-3">&nbsp;</label>
                       <div class="col-md-9">
                          <!-- Image preview -->
                          <img class="img-responsive" ng-style="{ width : $editBreakingNewsItemCtrl.breakingNewsItemImageWidth, heigth: $editBreakingNewsItemCtrl.breakingNewsItemImageHeight }" ng-src="{{$editBreakingNewsItemCtrl.breakingNewsItemImageURL}}" alt="">
                       </div>
                   </div>

                   <access-selector form="$editBreakingNewsItemCtrl.editBreakingNewsItemForm" obj-description-prefix="no" obj-description="destaque rotativo" obj="$editBreakingNewsItemCtrl.breakingNewsItem" get-access="$editBreakingNewsItemCtrl.getAccessCallback(obj, valid)" check-access-input="$editBreakingNewsItemCtrl.setIsAccessInputValidCallback(valid)"></access-selector>
              </div>

              <div class="form-actions">
                  <div class="row">
                      <div class="col-md-12 text-center">
                          <button type="button" class="btn green" ng-click="$editBreakingNewsItemCtrl.save()" ng-disabled="$editBreakingNewsItemCtrl.editBreakingNewsItemForm.$submitted && !$editBreakingNewsItemCtrl.isValid()">
                              <i class="fa fa-check">&nbsp;</i>Inserir
                          </button>
                          <button type="button" class="btn default" ui-sref="breakingNews.list">Fechar</button>
                      </div>
                  </div>
              </div>

          </form>
          <!-- END FORM-->
      </div>
   </div>
   <!-- END EDIT BREAKING NEWS -->
</div>
