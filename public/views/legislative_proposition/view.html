<!-- BEGIN MAIN CONTENT -->
<div class="row">
    <div class="col-md-12">
        <!-- BEGIN LIST PORTLET-->
        <div class="portlet light portlet-fit bordered">
            <div class="portlet-title">
                <div class="caption">
                    <i class=" icon-layers font-green"></i>
                    <span class="caption-subject font-green bold uppercase">Gerenciamento de Licitações</span>
                </div>
            </div>
            <div class="portlet-body">
               <div class="table-toolbar">
                  <div class="mt-element-list">
                      <div class="mt-list-head list-news ext-1 font-white bg-grey-gallery">
                          <div class="list-head-title-container uppercase">
                              <h3 class="list-title">Licitação: {{ $viewLicitacaoCtrl.formatLicitacaoNumber($viewLicitacaoCtrl.licitacao.number, $viewLicitacaoCtrl.licitacao.year) }}</h3>
                          </div>
                      </div>
                      <div class="mt-list-container list-news ext-1">
                          <ul>
                              <li class="mt-list-item" ng-if="$viewLicitacaoCtrl.infoMessage">
                                 <div class="alert alert-info alert-no-margin" role="alert">
                                    {{ $viewLicitacaoCtrl.infoMessage }}
                                 </div>
                              </li>
                              <li class="mt-list-item" ng-if="$viewLicitacaoCtrl.errorMessage">
                                 <div class="alert alert-danger alert-no-margin" role="alert">
                                    {{ $viewLicitacaoCtrl.errorMessage }}
                                 </div>
                              </li>

                              <li class="mt-list-item">
                                  <div class="list-item-content page-item-content">
                                      <p class="uppercase">
                                         {{$viewLicitacaoCtrl.licitacao.description}}
                                      </p>
                                  </div>

                                  <div class="list-datetime page-item-datetime bold uppercase">
                                     <i class="fa fa-info-circle font-black" ng-if="$viewLicitacaoCtrl.licitacao.categoryDescription"></i>
                                     <span class="font-black" ng-if="$viewLicitacaoCtrl.licitacao.categoryDescription">Modalidade: {{ $viewLicitacaoCtrl.licitacao.categoryDescription }}</span>
                                  </div>

                                  <div class="list-datetime page-item-datetime bold uppercase">
                                     <i class="fa fa-info-circle font-black" ng-if="$viewLicitacaoCtrl.licitacao.stateDescription && $viewLicitacaoCtrl.licitacao.state == 0"></i>
                                     <span class="font-black" ng-if="$viewLicitacaoCtrl.licitacao.stateDescription && $viewLicitacaoCtrl.licitacao.state == 0">Estado: {{ $viewLicitacaoCtrl.licitacao.stateDescription }}</span>
                                     <i class="fa fa-info-circle font-green-meadow" ng-if="$viewLicitacaoCtrl.licitacao.stateDescription && $viewLicitacaoCtrl.licitacao.state == 1"></i><span class="font-green-meadow" ng-if="$viewLicitacaoCtrl.licitacao.stateDescription && $viewLicitacaoCtrl.licitacao.state == 1">Estado: {{ $viewLicitacaoCtrl.licitacao.stateDescription }}</span>
                                     <i class="fa fa-info-circle font-red" ng-if="$viewLicitacaoCtrl.licitacao.stateDescription && $viewLicitacaoCtrl.licitacao.state == 2"></i><span class="font-red" ng-if="$viewLicitacaoCtrl.licitacao.stateDescription && $viewLicitacaoCtrl.licitacao.state == 2">Estado: {{ licitacao.stateDescription }}</span>
                                  </div>

                                  <div class="list-datetime page-item-datetime bold uppercase">
                                     <i class="fa fa-clock-o font-black" ng-if="$viewLicitacaoCtrl.licitacao.creationDate"></i><span class="font-black" ng-if="$viewLicitacaoCtrl.licitacao.creationDate">Criação: {{ $viewLicitacaoCtrl.licitacao.creationDate | date: 'dd/MM/yyyy HH:mm' }}</span>
                                     <i class="fa fa-clock-o font-green-meadow" ng-if="$viewLicitacaoCtrl.licitacao.publicationDate" style="margin-left: 15px"></i><span class="font-green-meadow" ng-if="$viewLicitacaoCtrl.licitacao.publicationDate">Publicação: {{ $viewLicitacaoCtrl.licitacao.publicationDate | date: 'dd/MM/yyyy HH:mm' }}</span>
                                     <i class="fa fa-clock-o font-red" ng-if="$viewLicitacaoCtrl.licitacao.changedDate" style="margin-left: 15px"></i><span class="font-red" ng-if="$viewLicitacaoCtrl.licitacao.changedDate">Última Edição: {{ $viewLicitacaoCtrl.licitacao.changedDate | date: 'dd/MM/yyyy HH:mm' }}</span>
                                  </div>

                                  <div class="list-datetime page-item-datetime bold uppercase">
                                     <i class="fa fa-info-circle font-black" ng-if="$viewLicitacaoCtrl.licitacao.categoryDescription"></i><span class="font-black" ng-if="$viewLicitacaoCtrl.licitacao.category.description">Modalidade: {{ $viewLicitacaoCtrl.licitacao.category.description }}</span>
                                  </div>

                              </li>

                              <li class="mt-list-item">
                                 <div class="form-actions">
                                     <div class="row">
                                         <div class="col-md-12">
                                              <button type="button" class="btn black" ui-sref="licitacao.newEvent({ licitacaoId: $viewLicitacaoCtrl.licitacao._id })">
                                                 <i class="fa fa-calendar">&nbsp;</i>Adicionar Evento
                                              </button>
                                              <button type="button" class="btn black" ui-sref="licitacao.edit({ licitacaoId: $viewLicitacaoCtrl.licitacao._id })">
                                                 <i class="fa fa-pencil">&nbsp;</i>Editar
                                              </button>
                                              <button type="button" class="btn green-meadow" ui-sref="licitacao.publish({ licitacaoId: $viewLicitacaoCtrl.licitacao._id })" ng-if="$viewLicitacaoCtrl.licitacao.state !== 1 && (!$viewLicitacaoCtrl.licitacao.events ||  $viewLicitacaoCtrl.licitacao.events.length === 0)">
                                                 <i class="fa fa-globe">&nbsp;</i>Publicar
                                              </button>
                                              <button type="button" class="btn green-meadow" ng-click="$viewLicitacaoCtrl.publishLicitacao()" ng-if="$viewLicitacaoCtrl.licitacao.state !== 1 && $viewLicitacaoCtrl.licitacao.events && $viewLicitacaoCtrl.licitacao.events.length > 0">
                                                 <i class="fa fa-globe">&nbsp;</i>Publicar
                                              </button>
                                              <button type="button" class="btn red" ng-click="$viewLicitacaoCtrl.unpublishLicitacao()"  ng-if="$viewLicitacaoCtrl.licitacao.state === 1">
                                                 <i class="fa fa-eye-slash">&nbsp;</i>Despublicar
                                              </button>
                                              <button type="button" class="btn red" ng-click="$viewLicitacaoCtrl.remove()">
                                                 <i class="fa fa-trash">&nbsp;</i>Remover
                                              </button>

                                              <button type="button" class="btn black" ng-click="$viewLicitacaoCtrl.close()">
                                                 <i class="fa fa-close">&nbsp;</i>Fechar
                                              </button>
                                         </div>
                                     </div>
                                 </div>
                              </li>

                              <li class="mt-list-head list-news ext-1 font-white bg-grey-gallery" ng-if="$viewLicitacaoCtrl.licitacao.events && $viewLicitacaoCtrl.licitacao.events.length > 0">
                                 <div class="list-head-title-container uppercase">
                                     <h4 class="list-title">Eventos da Licitação</h4>
                                 </div>
                              </li>

                              <li class="mt-list-item">
                                 <div class="todo-tasklist">
                                     <div ng-repeat="event in $viewLicitacaoCtrl.licitacao.events" class="todo-tasklist-item todo-tasklist-item-border-green">
                                         <div class="todo-tasklist-item-text">{{event.description}}</div>
                                         <div class="todo-tasklist-controls pull-left">
                                             <span class="todo-tasklist-date">
                                                <i class="fa fa-calendar"></i>{{event.date | date: 'dd/MM/yyyy'}}
                                                &nbsp;
                                                <i class="fa fa-file"></i><a target="_blank" ng-href="{{$viewLicitacaoCtrl.urlFileDownload}}{{event._id}}">arquivo</a>
                                                &nbsp;
                                                <i class="fa fa-pencil"></i><a ui-sref="licitacao.editEvent({ licitacaoId: $viewLicitacaoCtrl.licitacao._id, eventId: event._id })">editar</a>
                                                &nbsp;
                                                <i class="fa fa-close"></i><a target="_blank" ng-click="$viewLicitacaoCtrl.removeLicitacaoEvent(event)">excluir</a>
                                             </span>
                                         </div>
                                     </div>
                                     <div class="alert alert-danger" role="alert" ng-if="$viewLicitacaoCtrl.licitacao.events.length === 0">
                                        {{ $viewLicitacaoCtrl.notFoundMessage }}
                                     </div>
                                 </div>
                              </li>

                          </ul>
                      </div>
                  </div>
               </div>

            </div>
        </div>
        <!-- END LIST PORTLET-->
    </div>
</div>
<!-- END MAIN CONTENT -->
